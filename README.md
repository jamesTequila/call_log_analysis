# Southside / Omni Call Center Analytics

A robust data analysis pipeline for generating insightful, week-over-week call center performance reports. This tool ingests raw call logs, cleans/deduplicates date, ensures historical consistency, and produces mobile-responsive HTML reports with interactive charts.

## Key Features

*   **Automated Reporting**: Generates a polished HTML report (`call_report.html`) with key metrics (Retail vs. Trade, Abandoned Calls, Wait Times).
*   **Historical Consistency**: Strict date-based logic ensures "This Week" and "Last Week" never overlap. Metrics are logged (`reports/historical_weeks.json`) to validate trends over time.
*   **Data Integrity**:
    *   Automatic deduplication of call logs.
    *   Mixed-week logic removed for clarity.
    *   **Verification Report**: Outputs a detailed markdown summary (`reports/report_verification_summary.md`) confirming that all numbers (Cards vs. Summary vs. Plots) align perfectly.
*   **Mobile-Friendly Visualization**:
    *   Powered by Plotly.
    *   Responsive charts with auto-sizing.
    *   Optimized layouts (legend at bottom) to prevent overlap on small screens.
*   **Caller Journey Analysis**: Tracks calls through Queues, Voicemail, and Out-of-Hours handling.

## Installation

Ensure you have Python 3.8+ installed.

1.  Clone the repository:
    ```bash
    git clone https://github.com/jamesTequila/antigravity.git
    ```
2.  Install dependencies:
    ```bash
    pip install pandas plotly jinja2 psycopg2-binary
    ```
    *(Note: `psycopg2` is optional if you are not using the database snapshot feature).*

## Data Structure

Place your raw CSV files in the `data/` directory.

*   **Main Call Logs**: `CallLogLastWeek_*.csv`
*   **Abandoned Call Logs**: `AbandonedCalls*.csv`

The system automatically identifies, cleans, and merges these files.

## Usage

Run the main report generator:

```bash
python generate_report.py
```

### Outputs

After running the script, check the `reports/` folder:

1.  **`call_report.html`**: The main dashboard report (shareable).
2.  **`report_verification_summary.md`**: A detailed audit log proving the report's accuracy.
3.  **`historical_weeks.json`**: (Hidden) Log file tracking historical metrics for consistency checks.
4.  **CSVs**: Cleaned data files (`call_logs_cleaned.csv`, etc.) for further analysis.

## Development

*   **`call_log_analyzer.py`**: Core analysis logic and Plotly chart generation.
*   **`validate_historical.py`**: Verification logic and Markdown report generation.
*   **`generate_report.py`**: Main entry point; orchestrates data loading, analysis, and validation.
*   **`historical_log.py`**: Manages the JSON-based historical tracking.

## Recent Updates

*   **Mobile Responsiveness**: Charts now adapt to screen size; legends moved to bottom.
*   **Verification**: Added explicit breakdown of "This Week" vs "Last Week" calculations in the verification summary.

---
*Generated by Antigravity Agent*
